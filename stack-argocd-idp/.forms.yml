---
version: "2"
use_cases:
- name: default
  sections:
  - name: ArgoCD
    groups:
    - name: ArgoCD
      technologies: [terraform]
      vars:
      - name: "ArgoCD Version"
        description: "Version of ArgoCD to deploy"
        key: argocd_version
        widget: simple_text
        type: string
        default: "7.8.3"
        required: true
        validations: 
        - regexp: "^\\d+\\.\\d+\\.\\d+$" 
          error_message: "Please enter a valid ArgoCD version such as 7.8.3"
      - name: "Kubernetes Cluster"
        description: "Kubernetes cluster IP address"
        key: kubernetes_ip_address
        widget: cy_inventory_resource
        widget_config:
          attribute: public_ip
          filters:
            project: ($ .project $)
            type: aws_instance
        type: string
        required: true

    - name: GitHub
      technologies: [pipeline]
      vars:
      - name: "GitHub PAT"
        description: "GitHub Personal Access Token allowing to create the new ArgoCD repository"
        key: github_pat
        widget: cy_cred
        widget_config:
          display_keys: true
          cred_types: ["basic_auth"]
        type: string
        default: "((github-pat.password))"
        required: true